<!DOCTYPE html>
{% load static %}
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{% static "assets/images/logo.jpg" %}"><title>{{project.project_name}}</title>				<!--Should be updated from database -->
    <script src="{% static "assets/js/jquery-2.0.0.min.js" %}"></script>
	<script src="{% static "assets/js/ajax2.js" %}"></script>
    <script src="{% static "assets/js/ajax.js" %}"></script>
    <script src="{% static "assets/js/ajax1.js" %}"></script>
    <script src="{% static "assets/js/chat.js" %}"></script>
    <script src="{% static "assets/js/chatrefresh.js" %}"></script>
    <script src="{% static "assets/js/jquery-1.10.2.js" %}"></script>
    <script src="{% static "assets/js/jquery-ui.js" %}"></script>
	<script src="{% static "assets/js/jquery-ui-1.10.4.custom.js" 		%}"></script>
<script src="{% static "assets/js/jquery.timepicker.js" %}"></script>
    <!-- Core CSS - Include with every page -->
    <link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
    <link href="{% static "assets/font-awesome/css/font-awesome.css" %}" rel="stylesheet">			<!--add task, delete task, add member to task, remove member from task, manager corner, edit project, declare project completed-->
	 <link href="{% static "assets/css/jquery-ui.css" %}" rel="stylesheet">
    <!-- Page-Level Plugin CSS - Dashboard -->
    <link href="{% static "assets/css/plugins/morris/morris-0.4.3.min.css" %}" rel="stylesheet ">
    <link href="{% static "assets/css/plugins/timeline/timeline.css" %}" rel="stylesheet ">

    <!-- SB Admin CSS - Include with every page -->
    <link href="{% static "assets/css/sb-admin.css" %}" rel="stylesheet">
	<style type="text/css">
		input[type="checkbox"] {float:right;}
		ul {list-style-type:none;}
		.nav li	{margin-bottom:0px;}
		.done {
			float:right;
			width:20px;
			height:20px;
		}
		.notdone {
			display:none;
		}
		li {display:block;}
		a.list-group-item1 {
			text-decoration:none;
			background-color:#f5f5f5;
			border-top-right-radius:4px;
			border-top-left-radius:4px;
			position:relative;
			display:block;
			padding:10px 15px;
			margin;-1px;
			border:1px solid #ddd;
		}
		#comment {
			display:none;
			height:auto;
			background: #FFFFFF;
			border-width:2px;
			overflow-y: auto;
			border-bottom-left-radius:3px;
			border-bottom-right-radius:3px;
			border:1px solid #ddd;
			z-index: 1000;
			padding:10px;
			-webkit-transition: all 0.4s ease 0s;
			-moz-transition: all 0.4s ease 0s;
			-ms-transition: all 0.4s ease 0s;
			-o-transition: all 0.4s ease 0s;
			transition: all 0.4s ease 0s;
		}
		#comment-active {
			height:auto;
			background: #FFFFFF;
			border-width:2px;
			overflow-y: auto;
			border-bottom-left-radius:3px;
			border-bottom-right-radius:3px;
			border:1px solid #ddd;
			z-index: 1000;
			padding:10px;
			-webkit-transition: all 0.4s ease 0s;
			-moz-transition: all 0.4s ease 0s;
			-ms-transition: all 0.4s ease 0s;
			-o-transition: all 0.4s ease 0s;
			transition: all 0.4s ease 0s;
		}
		li {
			margin-bottom:2px;
		}
		ul .taskcom {
			display:block;
			list-style-type:none;
			padding-left:0;
			padding-right:0;
			margin:5px;
		}
		ul .taskcom li {
			width:100%;
			background:#F2F2F2;
			color:#000000;
			padding:5px;
			border-radius:2px;
			margin-left:5px;
			margin-right:8px;
		}
		.inp,.addcom textarea {
			width:100%;
			height:30px;
			border-radius:2px;
			border-width:1px;
			padding:5px;
			margin-left:5px;
			margin-right:8px;
			border:solid #F2F2F2 2px;
		}
		.inp1 {
			width:100%;
			height:30px;
			border-radius:2px;
			border-width:1px;
			padding:5px;
			border:solid #F2F2F2 2px;
		}
		.addcom {
			border-radius:2px;
			border-width:1px;
			padding-left:0;
			padding-right:0;
			margin:5px;
		}
		.sub {
			height:30px;
			margin-left:5px;
			margin-right:8px;
			width:100px;
		}
		.hide, .hide1 {
			display:none;
		}
		.addchat {
			padding:10px 15px;
			background-color:#f5f5f5;
			border-top:1px solid #ddd;
			border-bottom-right-radius:3px;
			border-bottom-left-radius:3px;
			border-radius:2px;
			width:100%;
		}
		.subj {
			width:200px;
			height:100%;
			float:left;
			margin-top:5px;
			text-align:left;
		}
		.desp {
			height:25px;
			width:300px;
			float:right;
			text-align:left;
		}
                .desp2 {
			float: right;
		}
		.desp1 {
			height:150px;
			width:300px;
			float:right;
			text-align:justify;
		}
		.about-part {
			display:block;
			width:100%;
			margin-bottom:10px;
			height:auto;
		}
		.addtask {
			width:120px;
			height:40px;
			border:1px solid #DDD;
			background-color:#f5f5f5;
			margin-bottom:10px;
			margin-left:55px;
			text-align:center;
		}
		.addtask:hover {
			background-color:#BDBDBD;
		}
		li .files {
			display:inline-block;
			width:100%;
			height:30px;
			padding:5px;
			text-align:center;
			border-radius:2px;
			background-color:#f5f5f5;
			color:#000000;
			margin-bottom:2px;
			float:right;
		}
		li .files:hover {
			background-color:#ddd;
		}
		a .file {
			text-decoration:none;
			margin:0;
			color:#000000;
			width:190px;
			
		}
		li .people {
			display:block;
			width:200px;
			height:30px;
			padding:5px;
			text-align:center;
			border-radius:2px;
			background-color:#f5f5f5;
			color:#000000;
			margin:2px;
		}
		li .people:hover {
			background-color:#ddd;
		}
		.addpeop {
			height:30px;
			border-radius:2px;
			background-color:#f5f5f5;
			margin-top:10px;
			margin-left:30px;
			padding:5px;
			text-align:center;
			border-width:0px;
		}
		.addpeop:hover {
			background-color:#BDBDBD;
		}
		.addpeop1 {
			height:40px;
			border:1px solid #ddd;
			margin-top:10px;
			margin-left:42px;
			padding:10px;
			text-align:center;
		}
		.adddead {
			height:30px;
			border-radius:2px;
			background-color:#f5f5f5;
			margin-bottom:10px;
			padding:5px;
			margin-left:30px;
			text-align:center;
			border-width:0px;
		}
		.adddead:hover {
			background-color:#BDBDBD;
		}
		.adddead1 {
			height:40px;
			border:1px solid #ddd;
			margin-bottom:10px;
			padding:10px;
			margin-left:42px;
			text-align:center;
		}
		.overlay {
			visibility:hidden;
			position:absolute;
			width:100%;
			height:100%;
			left:0px;
			top:0px;
			text-align:center;
		}
		.overlay div {
			width:500px;
			height:500px;
			margin:100px auto;
			border:1px solid #000;
			border-radius:5px;
			padding:15px;
			text-align:center;
		}
		.taskname {
			width:100%;
			height:30px;
			text-align:center;
			float:center;
			margin:5px;
		}
		.taskdate {
			margin:5px;
			height:30px;
		}
		.modal1 {
			visibility:hidden;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
			position:absolute;
			z-index:99999;
			-webkit-transition: opacity 400ms ease-in;
			-moz-transition: opacity 400ms ease-in;
			transition: opacity 400ms ease-in;
		}
		#add_task {
			padding-left:20px;
			padding-right:20px;
			padding-top:10px;
		}
		#id_task_name {
			float:right;
			width:220px;
			height:30px;
		}
		#id_task_description {
			float:right;
			width:220px;
			height:30px;
		}
		#id_task_deadline {
			float:right;
			width:220px;
			height:30px;
		}
		#id_task_member {
			float:right;
			width:100px;
		}
		#add_task input[type="submit"] {
			float:center;
			width:80px;
			height:30px;
			margin-bottom:10px;
		}
		.errorlist {
			display:none;
		}
		.bin1 {
			background:url("{% static "assets/img/bin.png" %}");
			background-size: cover;
			border: 0;
		    display: block;
    		height: 30px;
    		width: 30px;
		}
		#id_project_name {
			float:right;
			width:280px;
			height:30px;
		}
		#id_project_description {
			float:right;
			width:280px;
			height:30px;
		}
		#id_project_department {
			float:right;
			width:280px;
			height:30px;
		}
		#id_project_members {
			float:right;
			width:280px;
			height:30px;
		}
		.complt {
			float:right;
			width:100px;
			border:1px solid #ddd;
			height:30px;
		}
		.bin {
			float: right;
		}
                #search-results {
                    display: block;
                    position: absolute;
                    z-index: 9999;
                    background: #FFFFFF;
                    width: 400px;
                    border: 1px solid #DDD;
                    border-bottom-left-radius: 3px;
                    border-bottom-right-radius: 3px;
                    padding: 0px;
                }
                #user-search {
                    height: 30px;
                    padding:5px;
                }
                #user-search:hover {
                    background: #DDD;
                }
}
	</style>
		<script type="text/javascript">
		var tabLinks = new Array();
    	var contentDivs = new Array();
    	function init()	{
			var tabListItems = document.getElementById('side-menu').childNodes;
      		for ( var i = 0; i < tabListItems.length; i++ ) {
        		if ( tabListItems[i].nodeName == "LI" ) {
        			var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
          			var id = getHash(tabLink.getAttribute('href') );
          			tabLinks[id] = tabLink;
          			contentDivs[id] = document.getElementById( id );
        		}
      		}
      		// Assign onclick events to the tab links, and
      		// highlight the first tab
      		var i = 0;
			
      		for ( var id in tabLinks ) {
        		tabLinks[id].onclick = showTab;
        		tabLinks[id].onfocus = function() { this.blur() };
        	}

      		// Hide all content divs except the first
      	var i=0;

      	for ( var id in contentDivs ) {
        		if ( i != 0 ) contentDivs[id].className = "hide";
        		i++;
      	}
			var checks=document.getElementsByTagName("INPUT");
			for(i=0;i<checks.length;i++)	{
				el=checks[i];
				if(el.type=="checkbox") {
					var elem=el.parentNode;
					elem=elem.parentNode;
					elem=elem.parentNode;
					elem=getFirstChildWithTagName(elem,"A");
					elem=getFirstChildWithTagName(elem,"DIV");
					if(el.checked==true) {
						elem.className="done";
					}else {
						elem.className="notdone";
					}
				}
			var e=document.getElementById("discussions");
			e.scrollTop=e.scrollHeight;
			}
		}
		function showTab() {
      		var selectedId = getHash(this.getAttribute('href') );
      		var selectedId2 = this.getAttribute('value');
			// Highlight the selected tab, and dim all others.	
      		// Also show the selected content div, and hide all others.
      		for ( var id in contentDivs ) {
        		if ( id == selectedId ) {
          			contentDivs[id].className = 'content';
        		} else {
          			contentDivs[id].className = 'hide';
        		}
      		}

      		// Stop the browser following the link
      		return false;
    	}
    	function getFirstChildWithTagName( element, tagName ) {
      		for ( var i = 0; i < element.childNodes.length; i++ ) {
        		if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
      		}
    	}
    	function getHash( url ) {
      		var hashPos = url.lastIndexOf ( '#' );
      		return url.substring( hashPos + 1 );
    	}
    	function changeTitle(title) {
    		document.title = title;
    	}
	</script>

</head>

<body onload="init()">
 
    {% if project %}
        
	<div class="md-modal md-effect-7" id="modal-7">
	<div class="modal1">
		<div class="modal-dialog">
			<div class="modal-content" style="height: 300px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="reset();">&times;</button>
					<h4 class="modal-title">Add New Task</h4>
				</div>
                                <form id="add_task" method="post" action="" onsubmit="return(add_task_validation(event,this));">
                                    {% csrf_token %}
                                    <p><label for="task_name"><strong>Task Name:</strong></label><input type="text" id="task_name" name = "task_name" style="text-align: left; width: 400px; height:30px; padding: 5px; float: right;"/></p>
                                    <p><label for="task_description"><strong>Task Description:</strong></label><input type="text" id="task_description" name = "task_description" style="text-align: left; width: 400px; height:30px; padding: 5px; float: right;"/></p>
                                    <p><label for="task_deadline"><strong>Task Deadline:</strong></label><input type="text" id="task_deadline" name = "task_deadline" style="text-align: left; width: 400px; height:30px; padding: 5px; float: right;"/></p>
                                    <p><strong>Task Members:</strong>
                                    <div style="float: right;">
                                    {% for member in project.project_members.all %}
                                        <input type="checkbox" name="task_members" id="option{{member.id}}" value={{member.username}} />
                                        <label for="option{{member.id}}" style="margin-bottom: 10px;"><b>{{member.username}}</b></label><br />
                                    {% endfor %}
                                    </div>
                                    </p>
                                    <input type="submit" name="add_task" value="Add Task" style="position: absolute; bottom: 0; left: 10px;"/>
                                </form>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div>
	<div class="body1">
    <div id="wrapper">

        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/rango/profile/{{user.pk}}/">Project Leader: {{project.project_leader.username}}</a>
            </div>
            <!-- /.navbar-header -->
            {% if project.leader %}
            <div class="navbar-header" style="margin-left: 300px; margin-top: 12px; ">
                <input type="text" id = "search" style="text-align: left; width: 400px; height:30px; padding: 5px;" placeholder="Search here" />
                <input type="text" id="curr_project" hidden="hidden" value="{{project.pk}}" />
                <ul id="search-results">
                </ul>
            </div>
            {% endif %}

            <ul class="nav navbar-top-links navbar-right">
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-tasks fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-tasks">
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Member_1</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (success)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Member_2</strong>
                                        <span class="pull-right text-muted">20% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                            <span class="sr-only">20% Complete</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Member_3</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (warning)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Member_4</strong>
                                        <span class="pull-right text-muted">80% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-tasks -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="/rango/profile/{{user.pk}}"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="/rango/logout/"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

        </nav>
        <!-- /.navbar-static-top -->

        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="side-menu">
                    {% if  is_member or is_leader %}
                    <li>
                        <a href="#dashboard"><i class="fa fa-desktop fa-fw"></i> Dashboard </a>
                    </li>
                    {% endif %}
                    {% if is_leader %}
                    <li>
                        <a href="#editproject"><i class="fa fa-edit fa-fw"></i> Edit Project Details </a>
                    </li>
                    {% endif %}
                    <li>
                        <a href="#about"><i class="fa fa-tag fa-fw"></i> About </a>
                    </li>
                </ul>
                <!-- /#side-menu -->
            </div>
            <!-- /.sidebar-collapse -->
        </nav>
        <!-- /.navbar-static-side -->
        {% if not is_other %}
		<div id="dashboard" class="content">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">{{project.project_name}}</h1>		<!--Project title must be updated from the database-->
                </div>
                <!-- /.col-lg-12 -->
            </div>
	
			<!-- /.row -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-tasks fa-fw"></i> All Tasks
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            {% if tasks %}
                     <ul>
                     {% for task in tasks.all %}
								<li>
									<a href="#" onclick=expand(this) class="list-group-item" id="com">
										{{ task.task_name }}
										<div class="notdone">
											<img src="{% static "assets/img/tick.png" %}" title="Task Completed" width="15px" height="15px">
										</div>
									</a>
									<div id="comment" class="el">
										<form id="complete_task" method="post" action="">
											{% csrf_token %}
											<strong> Have you completed this task? </strong>
											<input type="text" name="curr_task" hidden="hidden" value="{{task.pk}}" />
											<input type="submit" name="complete_task" value="Yes" onclick="check(this);" class="complt" />
										</form>
										<br />
										<div class="bin">
                                                                                Task Description<strong>{{task.task_description}}</strong>
										<form id="complete_task" method="post" action="">
											{% csrf_token %}
											<input type="text" name="curr_task" hidden="hidden" value="{{task.pk}}" />
											<input type="submit" name="delete_task" class="bin1" onclick="deletetask(this,event);" value="" title="Click this button to delete the task" />
										</form>
										</div>
										<div class="">
											<h5><strong>Deadline</strong> : {{ task.task_deadline }} </h5>
										</div>
										<h5><strong> People assigned to this task </strong></h5>
										<ul>
                              {% for member in task.task_member.all %}
											<li class="people">
												<a href="/rango/profile/{{member.pk}}" class="file">{{member.username}}</a>
											</li>
                              {% endfor %}
										</ul>
										<h5><strong> Files </strong></h5>
										<ul>
                              {% for comment in task.task_comment.all %}
                              	{% if comment.comment_file %}
                        			<li class="files">
												<a href="{{ MEDIA_URL }}{{ comment.comment_file }}" target="_blank" class="file">{{ comment.comment_file }}</a>
											</li>
                                 <br />
                                 {% endif %}
										{% endfor %}
										</ul>
										<h5><strong> Comments </strong></h5>
										<ul class="taskcom">
										{% for comment in task.task_comment.all %}
                                 <li>
												<strong>{{comment.comment_user.username}}</strong> : {{ comment.comment_text }} at {{comment.comment_time}}
											</li>
                              {% endfor %}
										</ul>
										<form id="comment_form" method="post" action="" enctype="multipart/form-data">
                              {% csrf_token %}
                              	<div class="addcom">
                                 	{{ comment.as_p }}
												<input type="text" name="curr_task" hidden="hidden" value="{{task.pk}}" />
                                    <input type="submit" name="comment" value="Comment" />
											</div>
                              </form>
									</div>
								</li>
                     {% endfor %}
							</ul>
                     {% endif %}
						</div>
						<!-- /.panel-body -->
                                                {% if is_leader %}
						<input type="submit" title="Add new task" class="addtask" value="Add new task" onclick="togglemodal();"/>
                                                {% endif %}
					</div>
					<!-- /.modal -->
					<!-- /.panel -->
                </div>
                <!-- /.col-lg-8 -->
                <div class="col-lg-4">
                    <div class="panel panel-default">
                        {% if is_leader %}                        
                        <div class="panel-heading">
                            <i class="fa fa-bell fa-fw"></i> Notifications Panel
                        </div>
                        <!-- /.panel-heading -->
                        {% for applicant in applicants %}
                            <form id="add_applicants" method="post" action="">
                                {% csrf_token %}
                                <a href="/rango/profile/{{applicant.pk}}" class="file">{{applicant.username}}</a>
                                <input type="text" name="curr_applicant" hidden="hidden" value="{{applicant.pk}}" />
                                <input type="submit" name="reject_applicant" style="float:right;" value="Reject" class="btn btn-primary" />
                                <input type="submit" name="accept_applicant" style="float:right;" value="Accept" class="btn btn-primary" />
                                
                            </form>
                        {% endfor %}
                        {% endif %}
                        <!--<div class="panel-body">
                            <div class="list-group">
        						<ul class="justlist"> </ul>
                                </div>
                            <a href="#" class="btn btn-default btn-block">View All Alerts</a>
                        </div>-->
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                    <div class="row">
                        <div class="col-lg-12">
                            <h1 class="page-header"></h1>		<!--Project title must be updated from the database-->
                        </div>
                    </div>
                    <div class="chat-panel panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-comments fa-fw"></i>
                            Discussions
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body" id="discussions">
                            {% include 'rango/chat.html' %}
                        </div>
                        <!-- /.panel-body -->
                        <div class="addchat">
                                <input size="20" class="inp1" type="text" name="chat_msg" id="chat_msg" placeholder="Type your message here..." />
                                <input type="text" name="project_id" id="project_id" value="{{project.pk}}" hidden="hidden" />
                                <input type="text" name="user_username" id="user_username" value="{{user.username}}" hidden="hidden" />
                                <input type="text" name="user_id" id="user_id" value="{{user.pk}}" hidden="hidden" />
                        </div>
                        <!-- /.panel-footer -->
                    </div>
                    <!-- /.panel .chat-panel -->
                </div>
                <!-- /.col-lg-4 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->
	</div>
        
	<!-- Your Tasks -->
	<div id="yourtasks" class="hide">
		<div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Project_Title</h1>		<!--Project title must be updated from the database-->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-tasks fa-fw"></i> Your Tasks
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                        </div>
                        <!-- /.panel-body -->
                    </div>
					<!-- /.panel -->
                </div>
                <!-- /.col-lg-8 -->
                <div class="col-lg-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bell fa-fw"></i> Your Notifications
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div class="list-group">
        						<ul class="justlist"> </ul>			<!--Should be updated dynamically from the database using javascript-->
							</div>
                            <a href="#" class="btn btn-default btn-block">View All Notifications</a>
                        </div>
                        <!-- /.panel-body -->
                    </div>
				</div>
			</div>
		</div>
	</div>
        {% endif %}
	<!-- /#Your Tasks -->
	<!-- Edit Project -->
	{% if is_leader %}
	<div id="editproject" class="hide">
		<div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">{{ project.project_name}}</h1>		<!--Project title must be updated from the database-->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
           <div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-tasks fa-fw"></i> Edit Project Details
                        </div>
                        <!-- /.panel-heading -->
                        
                        <div class="panel-body">
                    	   	<form id="edit_project_details" method="post" action="" onsubmit="return(edit_project_validation(event,this));">

                            	{% csrf_token %}

                              <p>
											<label for="id_project_name" > Project Name : </label>                             	
                              	{{ form.project_name }}
                              </p>
                              <p>
                              	<label for="id_project_department"> Project Department : </label>
                              	{{ form.project_department }}
                              </p>
                              <p>
                              	<label for="id_project_description"> Project Description : </label>
                              	{{ form.project_description }}
                              </p>
                          		<input type="submit" name="submit" value="Save Changes" class="btn btn-primary" />
            
                        	</form>
							<form id="delete_project" action="" method="post" >
								{% csrf_token %}
								<a href="" onclick="delpro(event);" style="float:right;" >Delete this project</a>
								<input type="submit" name="delete_project" value="Delete Project" hidden="hidden" id="delete_pro_btn" />
							</form>
                            </div>
                        
                        <!-- /.panel-body -->
                    </div>
					<!-- /.panel -->
					<!--			<div class="sub1" style="width:100%; float:center; padding:20px; text-align:center;">
									<input type="submit" name="save" value="Save changes" class="btn btn-primary" />
									<input type="submit" name="discard" value="Discard changes" class="btn btn-primary" /> 
								</div>	-->
                                        
                </div>
                <!-- /.col-lg-8 -->
			</div>
		</div>
	</div> 
	{% endif %}
        
	<!-- /Edit Project -->
	<!-- About -->
        
	<div id="about" class="content">
		<div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12" style="display:inline-block;">
                    <h1>{{ project.project_name }}</h1>		<!--Project title must be updated from the database-->
                    {% if not applied %}
                    {% if is_other %}
                    <form id="apply_to_project" method="post" action="">
                        {% csrf_token %}    
                        <input type="submit" name="apply" style="float:right;" value="Apply to this project" class="btn btn-primary" />
                    </form>
                    {% endif %}
                    {% else %}
                        <input type="button" name="apply" style="float:right;" value="Applied" class="btn"/>
                    {% endif %}
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-tasks fa-fw"></i> About this project
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
								<div class="about-part">
									<div class="subj">
										<strong> Subject </strong>
									</div>
									<div class="desp">
										{{ project.project_name }}
									</div>
								</div>
								<br />
								<div class="about-part">
									<div class="subj">
										<strong> Start Date </strong>
									</div>
									<div class="desp">
										{{ project.project_created }}
									</div>
								</div>
								
								<br />
								<div class="about-part">
									<div class="subj">
										<strong> Department </strong>
									</div>
									<div class="desp">
										{{ project.project_department }}
									</div>
								</div>
								<br />

								<div class="about-part">
									<div class="subj">
										<strong> Description </strong>
									</div>
									<div class="desp">
										{{ project.project_description }}
									</div>
								</div>
                                                                
                                                                <br />
								<div class="about-part">
									<div class="subj">
										<strong> Project Members </strong>
									</div>
                                                                           {% for member in project.project_members.all %}
									<div class="desp">
										<a href="/rango/profile/{{member.id}}/"><li><h4>{{member.first_name}} {{member.last_name}}</h4>
									</div>
                                                                           {% endfor %}
								</div>
								<br />
						</div>
                        <!-- /.panel-body -->
                    </div>
					<!-- /.panel -->
                </div>
                <!-- /.col-lg-8 -->
			</div>
		</div>
	</div>
	</div>
		
	<!-- /#About -->

    <!-- Core Scripts - Include with every page -->
    <script src="{% static "assets/js/jquery-1.10.2.js" %}"></script>
    <script src="{% static "assets/js/bootstrap.min.js" %}"></script>
	<script src="{% static "assets/js/bootstrap-modal.js" %}"></script>
    <script src="{% static "assets/js/plugins/metisMenu/jquery.metisMenu.js" %}"></script>

    <!-- Page-Level Plugin Scripts - Dashboard -->
    <script src="{% static "assets/js/plugins/morris/raphael-2.1.0.min.js" %}"></script>
    <script src="{% static "assets/js/plugins/morris/morris.js" %}"></script>

    <!-- SB Admin Scripts - Include with every page -->
    <script src="{% static "assets/js/sb-admin.js" %}"></script>

    <!-- Page-Level Demo Scripts - Dashboard - Use for reference -->
    <script src="{% static "assets/js/demo/dashboard-demo.js" %}"></script>
    <script type="text/javascript">
    	function add_task_validation(event,el)	{
    		var name=document.getElementById("id_project_name");
    		var desc=document.getElementById("id_project_description");
    		var dept=document.getElementById("id_project_department");
    		if(name.value=="")	{
    			name.style.border="2px solid #D00000;";
    			alert("Project Name can't be empty");
    			return false;
    		}
    		else	{
    			name.style.border="";
    			if(desc.value=="")	{
    				alert("Project Description can't be empty");
    				return false;
    			}
    			else	{
    				if(dept.options[0].selected)	{
    					alert("Department not selected");
    					return false;
    				}
    				else	{
    					return true;
    				}
    			}
    		}
    	}
    </script>
   <script type="text/javascript">
    	function edit_project_validation(event,el)	{
    		var name=document.getElementById("id_project_name");
    		var desc=document.getElementById("id_project_description");
    		var dept=document.getElementById("id_project_department");
    		if(name.value=="")	{
    			alert("Project Name can't be empty");
    			return false;
    		}
    		else	{
    			if(desc.value=="")	{
    				alert("Project Description can't be empty");
    				return false;
    			}
    			else	{
    				if(dept.options[0].selected)	{
    					alert("Department not selected");
    					return false;
    				}
    				else	{
    					return true;
    				}
    			}
    		}
    	}
		function add_task_validation(event,el)	{
			
    		var name=document.getElementById("id_task_name");
    		var desc=document.getElementById("id_task_description");
    		var dead=document.getElementById("id_task_deadline");
    		if(name.value=="")	{
    			alert("Task Name can't be empty");
    			return false;
    		}
    		else	{
    			if(desc.value=="")	{
    				alert("Task Description can't be empty");
    				return false;
    			}
    			else	{
    				if(dead.value=="")	{
    					alert("Task deadline can't be empty");
    					return false;
    				}
    				else	{
    					return true;
    				}
    			}
    		}
    	}
    </script>
<script>
  $(function() {
    $("#task_deadline").datepicker();
  });
  </script>
	<script type="text/javascript">
		function expand(el)	{
			var list = document.getElementsByClassName("el");
			var tabLink = getFirstChildWithTagName( el.parentNode, "DIV" );
			for(var i=0;i<list.length;i++)	{
				if(list[i]!=tabLink)	{
					list[i].id="comment";
					var elem=getFirstChildWithTagName(list[i].parentNode, "A" );
					elem.className="list-group-item";
				}
			}
			if(tabLink.id=="comment")	{
				tabLink.id="comment-active";
				var elem=getFirstChildWithTagName(tabLink.parentNode, "A" );
				elem.className="list-group-item1";
			}
			else	{
				tabLink.id="comment";
				var elem=getFirstChildWithTagName(tabLink.parentNode, "A" );
				elem.className="list-group-item";
			}
		}
		function getFirstChildWithTagName(element, tagName ) {
      		for ( var i = 0; i < element.childNodes.length; i++ ) {
        		if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
      		}
    	}
		function retrieve(el) {
			var tabLink = getFirstChildWithTagName( el.parentNode, "INPUT" );
			var content = tabLink.value;
			if(content!="")	{
				el=el.parentNode.parentNode;
				var list=getChildWithClassName(el, "taskcom");
				var child=document.createElement("LI");
				list.appendChild(child);
				child.innerHTML = "<strong>Ranat</strong> : "+content;
				tabLink.value = "";
			}
		}
		function getChildWithClassName(element, classname) {
			for ( var i = 0; i < element.childNodes.length; i++ ) {
        		if ( element.childNodes[i].className == classname ) return element.childNodes[i];
      		}
		}
		function enter(e, event) {
			/*var evt = window.event;*/
			if(event.which == 13) {
				retrieve(e);
			}
		}
		function recievechat(el) {
			var message=el.value;
			el.value="";
			if(message!="") {
				var child=document.createElement("LI");
				var child1=document.createElement("DIV");
				var child2=document.createElement("DIV");
				var child3=document.createElement("STRONG");
				var child4=document.createElement("P");
				var child5=document.createElement("SMALL");
				var child6=document.createElement("I");
				var child7=document.createTextNode("You");
				var child8=document.createTextNode(message);
				var child9=document.createTextNode("10 mins ago");
				child5.className="text-muted";
				child6.className="fa fa-clock-o fa-fw";
				child5.appendChild(child6);
				child5.appendChild(child9);
				child4.appendChild(child8);
				child3.className="primary-font";
				child3.appendChild(child7);
				child2.className="header";
				child2.appendChild(child3);
				child1.appendChild(child2);
				child1.appendChild(child4);
				child1.appendChild(child5);
				child.appendChild(child1);
				child.className="right clearfix";
				el=el.parentNode;
				el=el.parentNode;
				el=getChildWithClassName(el,"panel-body");
				var temp=el;
				el=getChildWithClassName(el,"chat");
				el.appendChild(child);
				scrollbar(temp);
			}
		}
		function chatupdate(e, event) {
			if(event.which == 13) {
				recievechat(e)
			}
		}
		function check(el) {
			var elem=el.parentNode;
			elem=elem.parentNode;
			elem=elem.parentNode;
			elem=getFirstChildWithTagName(elem,"A");
			elem=getFirstChildWithTagName(elem,"DIV");
			if(el.checked==true) {
				elem.className="done";
			}else {
				elem.className="notdone";
			}
		}
		function scrollbar(el) {
			el.scrollTop = el.scrollHeight;
		}
		function deletetask(el, event) {
			var r=window.confirm("Are you sure you want to delete this task?");
			if(r==true) {
				el=el.parentNode;
				el=el.submit();
			} else {
				event.preventDefault();
			}
		}
		function addtask(el) {
			el=el.parentNode;
			el=el.parentNode;
			el=getChildWithClassName(el,"modal-body");
			var el1=getChildWithClassName(el,"taskname");
			el1=el1.value;
			var el2=$('date1').val();
			var child1=document.createElement("LI");
			var child2=document.createElement("A");
			var child3=document.createElement("DIV");
			var child4=document.createElement("DIV");
			var child5=document.createElement("DIV");
			var child6=document.createElement("H5");
			var child7=document.createElement("UL");
			var child8=document.createElement("H5");
			var child9=document.createElement("UL");
			var child10=document.createElement("H5");
			var child11=document.createElement("UL");
			var child12=document.createElement("DIV");
			var child13=document.createElement("IMG");
			var child14=document.createElement("IMG");
			var child15=document.createElement("INPUT");
			child2.onclick="expand(child2);";
			child2.href="#";
			child2.className="list-group-item";
			child2.id="com";
			child3.id="comment";
			child3.className="el";
			child4.className="notdone";
			child5.className="bin";
			child5.onclick="deletetask(this);";
			child11.className="taskcom";
			child12.className="addcom";
			child13.src="./img/tick.png";
			child13.title="Task Completed";
			child13.width="15px";
			child13.height="15px";
			child14.src="./img/bin.png";
			child14.title="Delete Task";
			child14.width="30px";
			child14.height="30px";
			
		}
		function togglemodal() {
			var elem=document.getElementsByClassName("modal1");
			var el=elem[0];
			el.style.visibility="visible";
		}
		function reset() {
			var elem=document.getElementsByClassName("modal1");
			var el=elem[0];
			el.style.visibility="hidden";
		}
		function commententer(e) {
			e=getFirstChildWithTagName(e,"P");
			e=getFirstChildWithTagName(e,"TEXTAREA");
			var atr=document.createAttribute("onkeypress");
			atr.value="detectenter(this, event);";
			e.setAttributeNode(atr);
		}
		function detectenter(x, event) {
			if(event.which=13)	{
				x=x.parentNode;
				x=x.parentNode;
				x=x.parentNode;
				x.submit();
			}
		}
                function add_user_search(el,e)  {
                    e.preventDefault();
                    el=el.parentNode;
                    var el1=getFirstChildWithTagName(el,"A");
                    var name=el1.innerHTML;
                    var r=window.confirm("Are you sure you want to add "+name+" to this project?");
                    if (r==true) {
                        el=el.parentNode;
                        el.submit();
                    }
                }
      function delpro(event) {
			event.preventDefault();
			var r=window.confirm("Are you sure you want to delete this project?");
			if(r==true)	{
				var btn=document.getElementById("delete_pro_btn");
				btn.click();
			}
		}
	</script>
        {% else %}
            <strong>The specified Project does not exist!</strong>
        {% endif %}
</body>



</html>
